# 文件的查看与编辑

## cat 命令

```bash
cat [选项] [文件]
```
- 连接文件并输出到标准输出，常用于查看文件内容。

常用选项：

| 选项 | 作用                   |
|:----:|:----------------------|
| -n   | 显示行号               |
| -b   | 只对非空行编号         |
| -s   | 压缩连续空行           |
| -E   | 显示行尾 $             |
| -T   | 显示 Tab 为 ^I         |
| -v   | 显示非打印字符         |

示例：
```bash
cat -n hello.c
cat file1 file2 > merged.txt
```

---

## 重定向符

- `>`：标准输出重定向（覆盖）
- `>>`：标准输出追加
- `<`：标准输入重定向
- `2>`：标准错误重定向

示例：
```bash
echo Hello > file.txt
cat < file.txt
ls not_exist 2> error.log
```

---

## echo 命令

```bash
echo [选项] 字符串
```
- 输出文本到终端或文件。

常用选项：

| 选项 | 作用           |
|:----:|:--------------|
| -n   | 不换行         |
| -e   | 解析转义符     |

示例：
```bash
echo "Hello Linux"
echo -e "第一行\n第二行"
```

---

## more 命令

```bash
more [文件]
```
- 分页显示文件内容，空格翻页，b 上一页，q 退出。

---

## less 命令

```bash
less [文件]
```
- 分页浏览，支持上下翻页、搜索（/关键字），n 下一个，N 上一个，q 退出。

常用按键：

| 按键   | 作用           |
|:------:|:--------------|
| 空格   | 下翻一页       |
| b      | 上翻一页       |
| /word  | 向下搜索       |
| ?word  | 向上搜索       |
| n/N    | 下/上一个匹配  |
| q      | 退出           |

---

## hexdump 命令

```bash
hexdump -C 文件
```
- 以十六进制和 ASCII 方式查看二进制文件内容。

---

## file 命令

```bash
file 文件
```
- 判断文件类型。

---

## nano 编辑器

```bash
nano 文件名
```
- 简单易用的终端文本编辑器。

常用快捷键（Ctrl+字母）：

| 快捷键    | 作用           |
|:---------:|:--------------|
| Ctrl+O    | 保存           |
| Ctrl+X    | 退出           |
| Ctrl+K    | 剪切整行       |
| Ctrl+U    | 粘贴           |
| Ctrl+W    | 查找           |
| Ctrl+6    | 设置标记（选区）|
| Alt+6     | 复制选区       |
| Ctrl+C    | 显示光标位置   |
| Ctrl+_    | 跳转到行号     |

- 剪切/复制多行：Ctrl+6 设置标记，移动光标选中，Alt+6 复制，Ctrl+K 剪切，Ctrl+U 粘贴。
- 支持多文件缓冲、撤销、自动缩进等。

---

## vim 编辑器

```bash
vim 文件名
```
- Linux 下最强大的终端编辑器之一，支持多模式、语法高亮、批量处理等。

### 三种模式

1. **普通模式**（命令模式）：默认进入，执行命令、删除、复制、粘贴等。
2. **插入模式**：输入文本，按 `i`、`a`、`o`、`I`、`A`、`O` 进入，`Esc` 返回普通模式。
3. **命令行模式**：输入 `:` 进入，执行保存、退出、查找、替换等命令。

### 常用命令

| 命令/按键 | 作用                       |
|:---------:|:--------------------------|
| i/a/o     | 进入插入模式（当前/后/新行）|
| Esc       | 返回普通模式               |
| :w        | 保存                       |
| :q        | 退出                       |
| :wq       | 保存并退出                 |
| :q!       | 强制退出                   |
| dd        | 删除当前行                 |
| yy        | 复制当前行                 |
| p/P       | 粘贴到下/上一行            |
| u         | 撤销                       |
| Ctrl+r    | 重做                       |
| /word     | 向下搜索                   |
| ?word     | 向上搜索                   |
| n/N       | 下/上一个匹配              |
| :set nu   | 显示行号                   |
| :set nonu | 取消行号                   |
| :[n]      | 跳转到第 n 行              |
| gg/G      | 跳转到首/尾行              |
| :!cmd     | 执行外部命令               |

### 数字与操作结合

- `dG`：删除到文件末尾
- `d3h`：删除光标左侧3个字符
- `y2l`：复制光标右侧2个字符
- `3dd`：删除3行
- `5yy`：复制5行
- `10p`：粘贴10次

### 可视模式与批量操作

- `v`：字符可视模式，`V`：行可视模式，`Ctrl+v`：块可视模式
- 选中后可批量注释、缩进、删除、复制等
- 例如选中多行后输入 `:s/^/#/` 可批量注释

### 宏与脚本

- `q[a-z]` 开始录制宏，执行操作，`q` 结束，`@a` 执行 a 宏，`@@` 重复上次宏
- 支持 `:source` 加载脚本，`@:` 重复上次命令

### 替换与查找

- `:%s/old/new/g` 全文替换
- `:1,10s/foo/bar/g` 替换1-10行

### 其他技巧

- `:r 文件` 读入其他文件内容
- `:!ls` 执行 shell 命令
- `:vsp 文件` 垂直分屏

### 配置文件

- 用户配置：`~/.vimrc`

---

## 其他编辑器

- **nvim (Neovim)**：vim 的现代分支，支持异步、插件生态丰富。
- **emacs**：功能极其强大，可作为 IDE、邮件客户端等，拥有 Lisp 脚本扩展能力。
- **micro**：现代终端编辑器，操作简单，支持鼠标、插件、语法高亮。

这些编辑器在 Linux 发展中各有地位：vim/nvim 以高效和脚本化著称，emacs 以可扩展性闻名，nano/micro 适合新手和快速编辑。

---

> 熟练掌握文本编辑器和查看工具，是高效使用 Linux 的基础。vim/nvim、emacs、nano、micro 各有特色，建议根据个人需求选择合适的编辑