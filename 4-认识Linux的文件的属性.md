# 文件属性与权限管理

使用 `ls -l` 可以查看文件类型、权限、属主、属组、大小、时间等信息。

```bash
$ ls -l
total 4
-rw-------. 1 user user    0 Jun  5 17:37 1.txt
drwx------. 2 user user 3452 Jun  5 17:38 test
```

## 文件类型

`ls -l` 第一列首字符表示类型：

| 字母 | 含义         |
| :---: | :---------- |
| `-`   | 普通文件    |
| `d`   | 目录        |
| `l`   | 链接文件    |
| `b`   | 块设备      |
| `c`   | 字符设备    |
| `s`   | 套接字      |
| `p`   | 管道        |

## 权限说明

权限共9位，分属主、属组、其他用户，每组三位（rwx）：

| 字母 | 含义   |
| :---: | :---- |
| r     | 读    |
| w     | 写    |
| x     | 执行  |

- 文件：r 读内容，w 改内容，x 可执行
- 目录：r 列表，w 新建/删除，x 进入

## 属主与属组

每个文件有属主（所有者）和属组（用户组），决定访问权限。属主通常为创建者，属组用于多用户协作。

## 时间戳与 inode

- `ls -l` 默认显示修改时间（mtime）
- `ls -l --time=atime/ctime` 可显示访问/状态更改时间
- `ls -i` 显示 inode 号

### `stat` 命令

用于显示文件详细元信息，包括 inode、权限、属主、属组、时间戳等。

```bash
stat 文件名
```

示例输出：
```bash
$ stat 1.txt
  File: 1.txt
  Size: 0               Blocks: 0          IO Block: 4096   regular empty file
Device: 254,58  Inode: 665613      Links: 1
Access: (0600/-rw-------)  Uid: ( 1000/   user)   Gid: ( 1000/   user)
Access: 2024-06-05 17:37:57.178158923 +0800
Modify: 2024-06-05 17:37:57.178158923 +0800
Change: 2024-06-05 17:37:57.178158923 +0800
 Birth: -
```

## 权限与所有权管理命令

### `chmod` 修改权限

```bash
chmod [选项] 模式 文件
```
- 数字法：`chmod 755 文件`
- 符号法：`chmod u+x 文件`
- `-R` 递归修改

常用模式说明：

| 数字 | 权限 | rwx  |
| :---: | :---: | :---: |
| 7     | rwx   | 读写执行 |
| 6     | rw-   | 读写    |
| 5     | r-x   | 读执行  |
| 4     | r--   | 只读    |
| 0     | ---   | 无权限  |

### `chown` 修改属主/属组

```bash
chown [选项] 用户[:组] 文件
```
- 需 root 权限
- `-R` 递归修改

### `chgrp` 修改属组

```bash
chgrp [选项] 组 文件
```
- `-R` 递归修改

---

> 通过合理设置权限和所有权，可以保障文件安全和多用户